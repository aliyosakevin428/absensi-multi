import{r as N,b as O,j as s}from"./app-Df3mbPUi.js";import{B as n}from"./button-9WYi6K-0.js";import{M as F,C as E,a as I,b as R,c as H,d as M,e as V}from"./multiple-selector-BHr4VHh-.js";import{P as U,a as z,b as G}from"./popover-BjqYHwJz.js";import{S as C,a as v,b as f,c as _,d as k}from"./select-CUSCLPc9.js";import{S as K,a as L,b as X,c as q,d as J,e as Q,f as W,X as Y}from"./sheet-Ulit7ETd.js";import{c as Z,t as P}from"./utils-638cp2NO.js";import{C as $}from"./chevrons-up-down-Dcdp5jj5.js";import{C as ss}from"./check-DbHeizSn.js";/* empty css            */import"./index-CA9Kvjwe.js";import"./index-uZWYb__A.js";import"./index-DbH9gTKF.js";import"./index-BSfUgiQX.js";import"./index-DCCetT5R.js";import"./index-BRG9LdGI.js";import"./badge-5VDjxQNy.js";import"./createLucideIcon-SMMqF0gJ.js";import"./index-BqPEmoZ3.js";import"./index-DF4tnvgq.js";import"./index-BdQq_4o_.js";import"./index-OP-2HeKn.js";import"./index-DJPV2Sm9.js";const ks=({children:T,purpose:h,attendance:a,users:y=[],events:l,absent:o})=>{var d,x,S,j,g,b;const[A,t]=N.useState(!1),{data:i,setData:r,post:w,put:B,processing:p}=O({users_id:((d=a==null?void 0:a.users)==null?void 0:d.map(e=>e.id.toString()))??[],events_id:((S=(x=a==null?void 0:a.event)==null?void 0:x.id)==null?void 0:S.toString())??"",status:(a==null?void 0:a.status)??"",absent_reasons_id:((g=(j=a==null?void 0:a.absent_reason)==null?void 0:j.id)==null?void 0:g.toString())??""}),u=y.map(e=>({value:e.id.toString(),label:e.name})),c=[{value:"Rencana",label:"Rencana"},{value:"Sedang Berlangsung",label:"Sedang Berlangsung"},{value:"Sudah Terlaksana",label:"Sudah Terlaksana"},{value:"Dibatalkan",label:"Dibatalkan"}];console.log(i);const D=()=>{h==="create"?w(route("attendance.store"),{onSuccess:()=>P.success("Absensi Berhasil Ditambahkan"),onFinish:()=>t(!1)}):B(route("attendance.update",a==null?void 0:a.id),{onSuccess:()=>P.success("Absensi Berhasil Diubah"),onFinish:()=>t(!1)})};return s.jsxs(K,{open:A,onOpenChange:t,children:[s.jsx(L,{children:T}),s.jsxs(X,{children:[s.jsx(q,{children:s.jsxs(J,{className:"capitalize",children:[h," Kehadiran Acara"]})}),s.jsx(F,{value:u.filter(e=>i.users_id.includes(e.value)),onChange:e=>r("users_id",e.map(m=>m.value)),options:u,placeholder:"Pilih Anggota..."}),s.jsxs(C,{value:i.events_id,onValueChange:e=>r("events_id",e),children:[s.jsx(v,{children:s.jsx(f,{placeholder:"Pilih Acara ..."})}),s.jsx(_,{children:l==null?void 0:l.map(e=>s.jsx(k,{value:e.id.toString(),children:e.name},e.id))})]}),s.jsxs(C,{value:i.absent_reasons_id,onValueChange:e=>r("absent_reasons_id",e),children:[s.jsx(v,{children:s.jsx(f,{placeholder:"Hadir / Tidak Hadir"})}),s.jsx(_,{children:o==null?void 0:o.map(e=>s.jsx(k,{value:e.id.toString(),children:e.name},e.id))})]}),s.jsxs(U,{children:[s.jsx(z,{asChild:!0,children:s.jsxs(n,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[i.status?(b=c.find(e=>e.value===i.status))==null?void 0:b.label:"Pilih Status Acara",s.jsx($,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(G,{className:"w-[200px] p-0",children:s.jsxs(E,{children:[s.jsx(I,{placeholder:"Cari status..."}),s.jsxs(R,{children:[s.jsx(H,{children:"Status tidak ditemukan."}),s.jsx(M,{children:c.map(e=>s.jsxs(V,{value:e.value,onSelect:m=>r("status",m),children:[s.jsx(ss,{className:Z("mr-2 h-4 w-4",i.status===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})]})})]}),s.jsxs(Q,{children:[s.jsx(n,{onClick:D,type:"submit",disabled:p,children:p?"Menyimpan...":"Simpan"}),s.jsx(W,{asChild:!0,children:s.jsxs(n,{variant:"outline",children:[s.jsx(Y,{}),"Close"]})})]})]})]})};export{ks as default};

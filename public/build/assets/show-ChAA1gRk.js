import{b as k,u as v,j as e,L as w}from"./app-Df3mbPUi.js";import{B as g}from"./button-9WYi6K-0.js";import{C as l,a as P,b as S,c as A,d as n}from"./card-Dc5LHktC.js";import{A as B}from"./app-layout-Cdpsr00c.js";import{t as j}from"./utils-638cp2NO.js";/* empty css            */import"./index-CA9Kvjwe.js";import"./theme-toggler-C-WERlBf.js";import"./sheet-Ulit7ETd.js";import"./index-uZWYb__A.js";import"./index-DbH9gTKF.js";import"./index-BSfUgiQX.js";import"./index-DCCetT5R.js";import"./index-BRG9LdGI.js";import"./createLucideIcon-SMMqF0gJ.js";import"./index-BqPEmoZ3.js";import"./index-DF4tnvgq.js";import"./index-OP-2HeKn.js";import"./index-EwimxF0w.js";import"./app-logo-BxA-0lpz.js";import"./app-logo-icon-S37ZxhZz.js";import"./avatar-C2HoZ03v.js";import"./settings-Biukm5Ub.js";import"./chevrons-up-down-Dcdp5jj5.js";import"./book-open-C22VND1L.js";import"./newspaper-DjC88fLo.js";import"./chevron-right-KX34Omcy.js";const re=({user:i,teams:r,positions:a})=>{var x,h,u;const{data:t,setData:o,put:b,processing:m,errors:d}=k({position_ids:((x=i.positions)==null?void 0:x.map(s=>s.id))||[],team_id:((h=i.team)==null?void 0:h.id)||null,roles:i.roles||[]}),{props:f}=v(),c=((u=f.auth)==null?void 0:u.roles)||[],N=c.includes("Superadmin")||c.includes("Admin"),_=s=>{t.position_ids.includes(s)?o("position_ids",t.position_ids.filter(y=>y!==s)):o("position_ids",[...t.position_ids,s])},p=s=>{o("team_id",s)},C=()=>{b(route("users.updatePositionsAndTeam",i.id),{preserveScroll:!0,onError:()=>{j.error("Gagal menyimpan perubahan")},onSuccess:()=>{j.success("Perubahan berhasil disimpan")}})};return e.jsxs(B,{title:"Detail User",description:"Detail data user beserta posisi & tim",children:[e.jsxs(l,{children:[e.jsxs(P,{children:[e.jsx(S,{children:i.name}),e.jsx(A,{children:i.email})]}),e.jsx(n,{children:e.jsxs("p",{className:"text-sm text-foreground",children:["Kontak: ",i.kontak??"-"]})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Posisi"}),a!=null&&a.length?e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(s=>e.jsx(l,{className:"flex items-center",children:e.jsxs(n,{className:"flex w-full items-center gap-3 p-4",children:[e.jsx("input",{type:"checkbox",checked:t.position_ids.includes(s.id),onChange:()=>_(s.id),className:"h-4 w-4 accent-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]})},s.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"Belum ada posisi"}),d.position_ids&&e.jsx("p",{className:"text-sm text-red-500",children:d.position_ids})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"mb-3 text-lg font-semibold",children:"Pilih Tim"}),r!=null&&r.length?e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(s=>e.jsx(l,{className:`cursor-pointer border ${t.team_id===s.id?"border-blue-500":"border-gray-200"}`,onClick:()=>p(s.id),children:e.jsxs(n,{className:"flex w-full items-center gap-3 p-4",children:[e.jsx("input",{type:"radio",name:"team",checked:t.team_id===s.id,onChange:()=>p(s.id),className:"h-4 w-4 accent-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]})},s.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"Belum ada tim"}),d.team_id&&e.jsx("p",{className:"text-sm text-red-500",children:d.team_id})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[N&&e.jsx(g,{onClick:C,disabled:m,className:"rounded-md bg-blue-500 px-4 py-2 text-sm text-white hover:bg-blue-700",children:m?"Menyimpan...":"Simpan Perubahan"}),e.jsx(g,{className:"rounded-md bg-red-500 px-4 py-2 text-sm text-white transition-colors hover:bg-red-700",asChild:!0,children:e.jsx(w,{href:route("users.index"),method:"get",children:"Kembali"})})]})]})};export{re as default};
